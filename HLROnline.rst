Работа с HLR компаниями
=======================


Создание запроса на проверку одного номера (POST)
-------------------------------------------------

Сервис создает HLR-задание в соответствии со значениями параметров, передаваемых сервису в POST-запросе следующего формата:

.. code-block:: json

   https://devino.online/api/v1/check_numbers/request?phone=<Номер получателя>
  
Параметры запроса:

+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| phone                |   String   |  Номер получателя                                      |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+


Пример ответа:

.. code-block:: json

   {
   "id": 0,
   "campaign_id": 0,
   "subscriber_id": 0,
   "status": "string",
   "created_at": "2018-05-03T09:45:06.416Z"
   }
   
Параметры ответа:

+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer  |  Идентификатор запроса                                 |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+
| campaign_id          |   integer  |  Идентификатор кампании                                |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+
| subscriber_id        |   integer  |  Идентификатор получателя                              |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+
| status               |   String   |  Статус запроса                                        |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+
| created_at           |   String   |  Дата создания запроса                                 |        Да    |
+----------------------+------------+--------------------------------------------------------+--------------+


Проверка нескольих номеров (POST)
---------------------------------

Данным запросом можно создать HLR-задание на несколько номеров.

.. code-block:: json

   https://devino.online/api/v1/check_numbers/requests?phones=<Номераполучателей>

+----------------------+---------------+----------------------------------------------------+--------------+
|      Параметр        | Тип данных    |    Описание                                        |Обязательный  |
+======================+===============+====================================================+==============+
| phones               | Array[string] |  Номера получателей                                |        Да    |
+----------------------+---------------+----------------------------------------------------+--------------+


Пример ответа:

.. code-block:: json

   {
   "id": 0,
   "campaign_id": 0,
   "subscriber_id": 0,
   "status": "string",
   "created_at": "2018-05-03T09:45:06.416Z"
   }


Запустить созданные задания (GET)
---------------------------------

.. code-block:: json

   https://devino.online/api/v1/check_numbers/requests?page=<Номер страницы>&per_page=<Кол-во записей>
  
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| page                 |   integer  |  Номер страницы                                        |       Нет    |
+----------------------+------------+--------------------------------------------------------+--------------+
| per_page             |   integer  |  Кол-во записей                                        |       Нет    |
+----------------------+------------+--------------------------------------------------------+--------------+

Получения статуса запроса (GET)
-------------------------------

Данным методом можно получить информацию о выполнении запроса по его id.

.. code-block:: json

   https://devino.online/api/v1/check_numbers/requests/{id}
  
  
+----------------------+---------------+----------------------------------------------------+--------------+
|      Параметр        | Тип данных    |    Описание                                        |Обязательный  |
+======================+===============+====================================================+==============+
| id                   | integer       |  Идентификатор запроса                             |        Да    |
+----------------------+---------------+----------------------------------------------------+--------------+


Получение статистики  (GET)
---------------------------

.. code-block:: json

   https://devino.online/api/v1/check_numbers/statistics?start_date=<Дата начала>&end_date=<Дата конца>&page=<Номер страницы>&per_page=<Кол-во записей>
  

+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| page                 |   integer  |  Номер страницы                                        |       Нет    |
+----------------------+------------+--------------------------------------------------------+--------------+
| per_page             |   integer  |  Кол-во записей                                        |       Нет    |
+----------------------+------------+--------------------------------------------------------+--------------+
| start_date           |   date     |  Дата начала выборки. Формат dd.mm.yyyy                |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| end_date             |   date     |  Дата конца выборки. Формат dd.mm.yyyy                 |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

  
  
Коды ошибок
-----------

+----------------------+--------------------------------------+
|   HTTP status code   | Описание                             |
+======================+======================================+
| 401                  | Неверный токен или формат заголовка  |
+----------------------+--------------------------------------+
| 403                  | Нет прав доступа к ресурсу           |
+----------------------+--------------------------------------+
| 404                  | Запрашиваемый ресурс не найден       |
+----------------------+--------------------------------------+
| 422                  | Ошибка валидации                     |
+----------------------+--------------------------------------+


