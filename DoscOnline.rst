Работа документами
==================

Точка подключения:
   
.. code-block:: json

   https://devino.online
   


Прием документа (POST)
----------------------

.. code-block:: json

   /api/v1/documents/accept?guid=<GUID документа>
   
   
 Параметры запроса:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| guid                 |   string   |  GUID документа                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
      "id": 0
   }
   
 
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer  |  Идентификатор документа                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Получение документа (POST)
--------------------------

.. code-block:: json

   /api/v1/documents/receive?guid=<GUID документа>
   
   
 Параметры запроса:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| guid                 |   string   |  GUID документа                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
      "id": 0
   }
   
 
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer  |  Идентификатор документа                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Работа с именами
================

Подтверждение имени отправителя (POST)
--------------------------------------

.. code-block:: json

   /api/v1/sender_names/confirm?guid=<GUID имени>
   
   
 Параметры запроса:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| guid                 |   string   |  GUID sender_name                                      |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
      "id": 0
   }
   
 
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer  |  Идентификатор документа                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Отклонение имени отправителя (POST)
-----------------------------------

.. code-block:: json

   /api/v1/sender_names/reject?guid=<GUID имени>
   
   
 Параметры запроса:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| guid                 |   string   |  GUID sender_name                                      |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
      "id": 0
   }
   
 
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer  |  Идентификатор документа                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Работа с балансом
=================

Точка подключения:
   
.. code-block:: json

   https://devino.online


Запрос баланса (GET)
--------------------

   
.. code-block:: json

   /api/v1/companies/current_balance
   
 Пример овтета:

.. code-block:: json

   {
    "balance": 0,
    "balance_currency": "string"
   }
   
 
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| balance              |   integer  |  Баланс компании                                       |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| balance_currency     |   string   |  Валюта                                                |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Вывод списка платежей (GET)
---------------------------

.. code-block:: json

   /api/v1/transactions?start_date=<Дата начала выборки>&end_date=<Дата окончания>&page=<Номер страницы>&per_page=<Кол-во записей>
   
   
 Параметры запроса:
 
+----------------------+------------+----------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                        |Обязательный  |
+======================+============+====================================================+==============+
| start_date           |   date     |  Дата начала выборки. Формат dd.mm.yyyy            |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+
| end_date             |   date     |  Дата конца выборки. Формат dd.mm.yyyy             |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+
| page                 |   integer  |  Номер страницы                                    |       Нет    |
+----------------------+------------+----------------------------------------------------+--------------+
| per_page             |   integer  |  Кол-во записей                                    |       Нет    |
+----------------------+------------+----------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
    "created_at": "2018-05-10T07:01:03.900Z",
    "customer_inn": "string",
    "customer_name": "string",
    "payment_purpose": "string",
    "amount": "string",
    "receiver_inn": "string",
    "receiver_name": "string",
    "id": 0
   }
   
   
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| created_at           |   string   |  Дата операции                                         |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| customer_inn         |   string   |  ИНН покупателя                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| customer_name        |   string   |  Наименование покупателя                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| payment_purpose      |   string   |  Назначение платежа                                    |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| amount               |   string   |  Сумма                                                 |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| receiver_inn         |   string   |  ИНН получателя                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| receiver_name        |   string   |  Наименование получателя                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| id                   |   integer  |  Идентификатор платежа (ID транзакции)                 |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Пополнение баланса (POST)
-------------------------

.. code-block:: json

   /api/v1/transactions?guid=<GUID>&amount=<Сумма>
   
   
 Параметры запроса:
 
+----------------------+------------+----------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                        |Обязательный  |
+======================+============+====================================================+==============+
| guid                 |   string   |  GUID                                              |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+
| amount               |   integer  |  Сумма                                             |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+

Пример овтета:

.. code-block:: json

   {
    "created_at": "2018-05-10T07:01:03.900Z",
    "customer_inn": "string",
    "customer_name": "string",
    "payment_purpose": "string",
    "amount": "string",
    "receiver_inn": "string",
    "receiver_name": "string",
    "id": 0
   }
   
   
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| created_at           |   string   |  Дата операции                                         |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| customer_inn         |   string   |  ИНН покупателя                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| customer_name        |   string   |  Наименование покупателя                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| payment_purpose      |   string   |  Назначение платежа                                    |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| amount               |   string   |  Сумма                                                 |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| receiver_inn         |   string   |  ИНН получателя                                        |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| receiver_name        |   string   |  Наименование получателя                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| id                   |   integer  |  Идентификатор платежа (ID транзакции)                 |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+


Ключи доступа к API
===================

.. code-block:: json

   /api/v1/user_tokens?phone=<Телефон>&password=<Пароль для входа>
   
   Параметры запроса:
 
+----------------------+------------+----------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                        |Обязательный  |
+======================+============+====================================================+==============+
| phone                |   string   |  Телефон                                           |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+
| password             |   string   |  Пароль для входа                                  |       Да     |
+----------------------+------------+----------------------------------------------------+--------------+


Пример овтета:

.. code-block:: json

   {
      "id": 0,
      "phone_number": "string",
      "token": "string"
   }
   
   
Параметры ответа:
 
+----------------------+------------+--------------------------------------------------------+--------------+
|      Параметр        | Тип данных |    Описание                                            |Обязательный  |
+======================+============+========================================================+==============+
| id                   |   integer   |  Идентификатор пользователя                           |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| phone_number         |   string   |  Телефон                                               |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+
| token                |   string   |  Токен авторизации                                     |       Да     |
+----------------------+------------+--------------------------------------------------------+--------------+

Коды ошибок
===========

+----------------------+--------------------------------------+
|   HTTP status code   | Описание                             |
+======================+======================================+
| 401                  | Неверный токен или формат заголовка  |
+----------------------+--------------------------------------+
| 403                  | Нет прав доступа к ресурсу           |
+----------------------+--------------------------------------+
| 404                  | Запрашиваемый ресурс не найден       |
+----------------------+--------------------------------------+
| 422                  | Ошибка валидации                     |
+----------------------+--------------------------------------+
